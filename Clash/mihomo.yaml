dns:
  enable: true
  prefer-h3: true
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  respect-rules: true
  nameserver:
    # ç½‘ç»œç¯å¢ƒæ–‡æ˜çš„è¯æ¨èç›´æ¥ä½¿ç”¨è¿è¥å•†çš„DNSæœåŠ¡å™¨ æˆ–è€… å¦‚æœçŸ¥é“è‡ªå·±ä¸Šæ¸¸å°±æ˜¯è¿è¥å•†DNSçš„æƒ…å½¢ä¸‹å°±ä½¿ç”¨
    - system
    - https://223.5.5.5/dns-query
    - https://doh.pub/dns-query
  proxy-server-nameserver:
    - https://223.5.5.5/dns-query
    - https://doh.pub/dns-query
rule-providers:
  private:
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/private.yaml
    path: ./ruleset/private.yaml
    behavior: domain
    interval: 86400
    format: yaml
    type: http
  private_ip:
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geoip/private.yaml
    path: ./ruleset/private_ip.yaml
    behavior: ipcidr
    interval: 86400
    format: yaml
    type: http
  cn_domain:
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/cn.yaml
    path: ./ruleset/cn_domain.yaml
    behavior: domain
    interval: 86400
    format: yaml
    type: http
  telegram_domain:
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/telegram.yaml
    path: ./ruleset/telegram_domain.yaml
    behavior: domain
    interval: 86400
    format: yaml
    type: http
  google_domain:
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/google.yaml
    path: ./ruleset/google_domain.yaml
    behavior: domain
    interval: 86400
    format: yaml
    type: http
  geolocation-!cn:
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/geolocation-!cn.yaml
    path: ./ruleset/geolocation-!cn.yaml
    behavior: domain
    interval: 86400
    format: yaml
    type: http
  cn_ip:
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geoip/cn.yaml
    path: ./ruleset/cn_ip.yaml
    behavior: ipcidr
    interval: 86400
    format: yaml
    type: http
  telegram_ip:
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geoip/telegram.yaml
    path: ./ruleset/telegram_ip.yaml
    behavior: ipcidr
    interval: 86400
    format: yaml
    type: http
  google_ip:
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geoip/google.yaml
    path: ./ruleset/google_ip.yaml
    behavior: ipcidr
    interval: 86400
    format: yaml
    type: http
  bing:
    url: https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Bing/Bing.yaml
    path: ./ruleset/bing.yaml
    behavior: classical
    interval: 86400
    format: yaml
    type: http
  copilot:
    url: https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Copilot/Copilot.yaml
    path: ./ruleset/copilot.yaml
    behavior: classical
    interval: 86400
    format: yaml
    type: http
  claude:
    url: https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Claude/Claude.yaml
    path: ./ruleset/claude.yaml
    behavior: classical
    interval: 86400
    format: yaml
    type: http
  bard:
    url: https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/BardAI/BardAI.yaml
    path: ./ruleset/bard.yaml
    behavior: classical
    interval: 86400
    format: yaml
    type: http
  openai:
    url: https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/OpenAI/OpenAI.yaml
    path: ./ruleset/openai.yaml
    behavior: classical
    interval: 86400
    format: yaml
    type: http
  steam:
    url: https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Steam/Steam.yaml
    path: ./ruleset/steam.yaml
    behavior: classical
    interval: 86400
    format: yaml
    type: http
  google:
    url: https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Google/Google.yaml
    path: ./ruleset/google.yaml
    behavior: classical
    interval: 86400
    format: yaml
    type: http
  advertising:
    url: https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Advertising/Advertising.yaml
    path: ./ruleset/advertising.yaml
    behavior: classical
    interval: 86400
    format: yaml
    type: http

proxy-groups:
  - icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/Static.png
    include-all: true
    exclude-filter: (?i)GB|Traffic|Expire|Premium|é¢‘é“|è®¢é˜…|ISP|æµé‡|åˆ°æœŸ|é‡ç½®
    name: PROXY
    type: select
    proxies:
      - AUTO
      - HK AUTO
      - SG AUTO
      - JP AUTO
      - US AUTO
  - icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/Urltest.png
    include-all: true
    exclude-filter: (?i)GB|Traffic|Expire|Premium|é¢‘é“|è®¢é˜…|ISP|æµé‡|åˆ°æœŸ|é‡ç½®
    name: AUTO
    type: url-test
    interval: 300
  - icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/OpenAI.png
    name: AIGC
    type: select
    proxies:
      - SG AUTO
      - JP AUTO
      - US AUTO
  - icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/Telegram.png
    name: Telegram
    type: select
    proxies:
      - HK AUTO
      - SG AUTO
      - JP AUTO
      - US AUTO
  - icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/Google.png
    name: Google
    type: select
    proxies:
      - HK AUTO
      - SG AUTO
      - JP AUTO
      - US AUTO
  - icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/HK.png
    include-all: true
    exclude-filter: (?i)GB|Traffic|Expire|Premium|é¢‘é“|è®¢é˜…|ISP|æµé‡|åˆ°æœŸ|é‡ç½®
    filter: (?i)é¦™æ¸¯|Hong Kong|HK|ğŸ‡­ğŸ‡°
    name: HK AUTO
    type: url-test
    interval: 300
  - icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/SG.png
    include-all: true
    exclude-filter: (?i)GB|Traffic|Expire|Premium|é¢‘é“|è®¢é˜…|ISP|æµé‡|åˆ°æœŸ|é‡ç½®
    filter: (?i)æ–°åŠ å¡|Singapore|ğŸ‡¸ğŸ‡¬
    name: SG AUTO
    type: url-test
    interval: 300
  - icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/JP.png
    include-all: true
    exclude-filter: (?i)GB|Traffic|Expire|Premium|é¢‘é“|è®¢é˜…|ISP|æµé‡|åˆ°æœŸ|é‡ç½®
    filter: (?i)æ—¥æœ¬|Japan|ğŸ‡¯ğŸ‡µ
    name: JP AUTO
    type: url-test
    interval: 300
  - icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/US.png
    include-all: true
    exclude-filter: (?i)GB|Traffic|Expire|Premium|é¢‘é“|è®¢é˜…|ISP|æµé‡|åˆ°æœŸ|é‡ç½®
    filter: (?i)ç¾å›½|USA|ğŸ‡ºğŸ‡¸
    name: US AUTO
    type: url-test
    interval: 300
  - icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/Global.png
    include-all: true
    exclude-filter: (?i)GB|Traffic|Expire|Premium|é¢‘é“|è®¢é˜…|ISP|æµé‡|åˆ°æœŸ|é‡ç½®
    proxies:
      - PROXY
      - AUTO
      - AIGC
      - Telegram
      - Google
      - HK AUTO
      - SG AUTO
      - JP AUTO
      - US AUTO
    name: GLOBAL
    type: select
    
  # æ–°å¢ 1ï¼šå¸¸ç”¨èŠ‚ç‚¹è´Ÿè½½å‡è¡¡ï¼ˆæ¶µç›– HK/SG/JP ä¼˜è´¨èŠ‚ç‚¹ï¼Œé€‚åˆæ—¥å¸¸æµè§ˆï¼‰
  - icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/LoadBalance.png # è´Ÿè½½å‡è¡¡å›¾æ ‡ï¼ˆå¯é€‰ï¼‰
    name: LOAD-BALANCE-MAIN # è´Ÿè½½å‡è¡¡ç»„åç§°ï¼ˆè‡ªå®šä¹‰ï¼‰
    type: load-balance # ç±»å‹å¿…é¡»ä¸º load-balance
    # 1. ç­›é€‰çº³å…¥è´Ÿè½½å‡è¡¡çš„èŠ‚ç‚¹ï¼ˆå¤ç”¨ä½ ç°æœ‰æ’é™¤æ— æ•ˆèŠ‚ç‚¹çš„è§„åˆ™ï¼‰
    include-all: true # åŒ…å«æ‰€æœ‰èŠ‚ç‚¹
    exclude-filter: (?i)GB|Traffic|Expire|Premium|é¢‘é“|è®¢é˜…|ISP|æµé‡|åˆ°æœŸ|é‡ç½® # æ’é™¤å¤±æ•ˆ/é™æµèŠ‚ç‚¹
    filter: (?i)é¦™æ¸¯|TW|éŸ©å›½|é¦–å°”|Hong Kong|HK|ğŸ‡­ğŸ‡°|KR|æ–°åŠ å¡|Singapore|ğŸ‡¸ğŸ‡¬|æ—¥æœ¬|ç¾|US|UK|Japan|ğŸ‡¯ğŸ‡µ # ä»…ä¿ç•™ HK/SG/JP èŠ‚ç‚¹ï¼ˆå¯è‡ªå®šä¹‰ï¼‰
    # 2. è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼ˆæ ¹æ®éœ€æ±‚é€‰ï¼‰
    strategy: round-robin # æ¨èï¼šä¼˜å…ˆåˆ†é…åˆ°å»¶è¿Ÿæœ€ä½çš„èŠ‚ç‚¹ï¼ˆé€‚åˆæ—¥å¸¸ï¼‰ï¼›å¯é€‰ round-robinï¼ˆè½®è¯¢ï¼Œé€‚åˆæµé‡å‡åˆ†ï¼‰
    # 3. å¥åº·æ£€æŸ¥ï¼ˆæ ¸å¿ƒï¼ç¡®ä¿èŠ‚ç‚¹å­˜æ´»ï¼‰
    health-check:
      enable: true # å¯ç”¨å¥åº·æ£€æŸ¥
      url: https://www.gstatic.com/generate_204 # å¥åº·æ£€æŸ¥åœ°å€ï¼ˆç¨³å®šçš„æ£€æµ‹é“¾æ¥ï¼‰
      interval: 30 # å¥åº·æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰ï¼Œå»ºè®® 30~60 ç§’
    # 4. é¢å¤–å‚æ•°ï¼ˆå¯é€‰ï¼Œä¼˜åŒ–ä½“éªŒï¼‰
    interval: 300 # èŠ‚ç‚¹çŠ¶æ€æ›´æ–°é—´éš”ï¼ˆç§’ï¼‰
    lazy: false # éæƒ°æ€§åŠ è½½ï¼ˆå¯åŠ¨æ—¶å³æ£€æµ‹èŠ‚ç‚¹ï¼‰
  
  # æ–°å¢ 2ï¼šAIGC ä¸“ç”¨è´Ÿè½½å‡è¡¡ï¼ˆä»… US/SG èŠ‚ç‚¹ï¼Œé€‚åˆ OpenAI/Claude ç­‰ï¼‰
  - icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/AIGC.png
    name: LOAD-BALANCE-AIGC # è‡ªå®šä¹‰åç§°
    type: load-balance
    include-all: true
    exclude-filter: (?i)GB|Traffic|Expire|Premium|é¢‘é“|è®¢é˜…|ISP|æµé‡|åˆ°æœŸ|é‡ç½® # æ’é™¤æ— æ•ˆèŠ‚ç‚¹
    filter: (?i)ç¾å›½|USA|ğŸ‡ºğŸ‡¸|æ–°åŠ å¡|Singapore|ğŸ‡¸ğŸ‡¬ # AIGC æœåŠ¡ï¼ˆå¦‚ OpenAIï¼‰ä¼˜å…ˆ US/SG èŠ‚ç‚¹
    strategy: round-robin # AIGC å¯¹å»¶è¿Ÿæ•æ„Ÿï¼Œé€‰æœ€å°å»¶è¿Ÿç­–ç•¥
    health-check:
      enable: true
      url: https://chat.openai.com/generate_204 # ç›´æ¥æ£€æµ‹ AIGC æœåŠ¡åœ°å€ï¼ˆæ›´ç²¾å‡†ï¼‰
      interval: 20 # ç¼©çŸ­æ£€æŸ¥é—´éš”ï¼Œç¡®ä¿èŠ‚ç‚¹èƒ½æ­£å¸¸è®¿é—® AIGC
    interval: 200

tun:
  enable: true
  stack: system          # æ¨è systemï¼Œæ¯” gvisor æ€§èƒ½é«˜
  auto-route: true
  auto-detect-interface: true
  strict-route: true     # é¿å… DIRECT æµé‡åå¤ç»è¿‡ TUN
  mtu: 1500              # è°ƒæ•´ MTUï¼Œé€šå¸¸ 1400~1500

rules:
  - "RULE-SET,advertising,REJECT"
  - "DOMAIN-SUFFIX,linkedin.com,LOAD-BALANCE-MAIN"
  - "RULE-SET,private,DIRECT"
  - "RULE-SET,private_ip,DIRECT"
  - "RULE-SET,bing,DIRECT"
  - "RULE-SET,cn_domain,DIRECT"
  - "RULE-SET,cn_ip,DIRECT"
  - "DOMAIN-SUFFIX,pytorch.org,DIRECT"
  - "DOMAIN-SUFFIX,anaconda.org,DIRECT"
  - "DOMAIN-SUFFIX,anaconda.com,DIRECT"
  - "DOMAIN-SUFFIX,hf-mirror.com,DIRECT"
  - "DOMAIN-SUFFIX,hf.co,DIRECT"
  - "DOMAIN-SUFFIX,freeconvert.com,DIRECT"
  - "DOMAIN-SUFFIX,gh-proxy.com,DIRECT"
  - "DOMAIN-SUFFIX,ghfast.top,DIRECT"
  - "DOMAIN-SUFFIX,tailscale.com,DIRECT"
  - "RULE-SET,copilot,LOAD-BALANCE-AIGC"
  - "RULE-SET,bard,LOAD-BALANCE-MAIN"
  - "RULE-SET,openai,LOAD-BALANCE-AIGC"
  - "RULE-SET,claude,LOAD-BALANCE-MAIN"
  - "RULE-SET,steam,LOAD-BALANCE-MAIN"
  - "RULE-SET,google,LOAD-BALANCE-MAIN"
  # - "RULE-SET,telegram_domain,PROXY"
  # - "RULE-SET,telegram_ip,PROXY"
  # - "RULE-SET,google_domain,PROXY"
  # - "RULE-SET,google_ip,PROXY"
  - "RULE-SET,geolocation-!cn,LOAD-BALANCE-MAIN"
  - "MATCH,LOAD-BALANCE-MAIN"
